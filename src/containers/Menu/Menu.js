import React, { Component } from 'react';
import { Link } from 'react-router-dom';
import styles from './Menu.module.css';

import logo from "../../images/CVE_logo_shadow.svg";
import menuIcon from '../../images/menuIcon.svg';
import closeIcon from '../../images/close.svg';
import linkImg1 from '../../images/fish.png';
import linkImg2 from "../../images/customers.jpg";
import linkImg3 from "../../images/impact.jpg";
import linkImg4 from "../../images/solution.jpg";

export default class Menu extends Component {
  state = {
    openMenu: false,
    navlinks: [
      { linkText: "Our clean technology", url: "", image: linkImg1 },
      { linkText: "Our wholesome products", url: "", image: linkImg2 },
      { linkText: "Our positive impact", url: "", image: linkImg3 },
      { linkText: "Our local and global solution", url: "", image: linkImg4 },
      { linkText: "About us", url: "", image: "" },
      { linkText: "News & updates", url: "", image: "" },
      { linkText: "Contact us", url: "", image: "" },
    ]
  }

  handleMenu = () => {
    this.setState(prevState => {
      return { openMenu: !prevState.openMenu }
    })
  }

  handleLinkImg = index => {
    const linkImgBox = this.refs.linkImgBox;
    linkImgBox.style.backgroundImage = `url(${this.state.navlinks[index]['image']})`;
    linkImgBox.classList.add(styles.slideLeft);
  }

  handleRemoveLinkImg = () => {
    const linkImgBox = this.refs.linkImgBox;
    linkImgBox.classList.remove(styles.slideLeft);
  }

  render() {

    if (this.state.openMenu === false) {
      return (
        <div className={styles.menuIcon} onClick={this.handleMenu}>
          <img src={menuIcon} alt="menu" />
        </div>
      )
    } else {
      return (
        <div className={styles.navMenu}>
          <div className={styles.left}>
            <div className={styles.bar} />
            <ul>
              {this.state.navlinks.map(({ linkText, url }, index) => (
                <li key={index}><Link to={url} onMouseLeave={this.handleRemoveLinkImg} onMouseOver={() => this.handleLinkImg(index)}>{linkText}</Link></li>
              ))}
            </ul>
          </div>
          <div className={styles.right}>
            <img src={closeIcon} alt="" onClick={this.handleMenu} />
            <div className={styles.linkImage} style={{ backgroundImage: `url(${linkImg1})` }} ref="linkImgBox" />
          </div>
          <Link to="/" onClick={this.handleMenu}>
            <img className={styles.logo} src={logo} alt="logo" />
          </Link>
        </div>
      )
    }
  }
}
